<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SF2 to OP-XY</title>
    <link rel="stylesheet" href="/src/styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="hero">
        <div>
          <p class="eyebrow">OP-XY Lab</p>
          <h1>SF2 to OP-XY</h1>
          <p class="subtitle">Convert SoundFonts in your browser using Pyodide + OPFS.</p>
        </div>
        <div class="status-card">
          <span class="label">Status</span>
          <strong id="status">Idle</strong>
        </div>
      </header>

      <section class="panel">
        <h2>Source</h2>
        <div class="file-row">
          <input id="sf2-file" type="file" accept=".sf2" />
          <button id="convert-btn" type="button">Convert</button>
        </div>
        <p class="hint">Large files (200-500MB) are supported using OPFS when available.</p>
      </section>

      <section class="panel">
        <h2>Options</h2>
        <div class="grid">
          <label>
            Velocities
            <input id="velocities" type="text" value="101" />
          </label>
          <label>
            Velocity mode
            <select id="velocity-mode">
              <option value="keep" selected>keep</option>
              <option value="split">split</option>
            </select>
          </label>
          <label>
            Resample rate
            <input id="resample-rate" type="number" value="22050" />
          </label>
          <label>
            Bit depth
            <input id="bit-depth" type="number" value="16" />
          </label>
          <label class="toggle">
            <input id="no-resample" type="checkbox" />
            No resample
          </label>
          <label class="toggle">
            <input id="zero-crossing" type="checkbox" />
            Zero crossing
          </label>
          <label>
            Loop end offset
            <input id="loop-end-offset" type="number" value="0" />
          </label>
          <label class="toggle">
            <input id="force-drum" type="checkbox" />
            Force drum
          </label>
          <label class="toggle">
            <input id="force-instrument" type="checkbox" />
            Force instrument
          </label>
          <label>
            Instrument playmode
            <select id="instrument-playmode">
              <option value="auto" selected>auto</option>
              <option value="poly">poly</option>
              <option value="mono">mono</option>
              <option value="legato">legato</option>
            </select>
          </label>
          <label>
            Drum velocity mode
            <select id="drum-velocity-mode">
              <option value="closest" selected>closest</option>
              <option value="strict">strict</option>
            </select>
          </label>
        </div>
      </section>

      <section class="panel">
        <h2>Output</h2>
        <div id="download"></div>
        <pre id="log"></pre>
      </section>
    </main>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
